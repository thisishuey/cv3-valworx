function getInfo(typ,theclass,func,params){theType=typ;theParams=params;var method="GET";switch(typ){case 'refined':var url="/services/ajax/get_info.php?keywords="+params.value+"&class="+theclass+"&function="+func;break;case 'limit_shipping_method':var url="/services/ajax/get_info.php?keywords="+params+"&class="+theclass+"&function="+func;break;case 'suggested_search':var url="/services/ajax/get_info.php?keywords="+params.value+"&class="+theclass+"&function="+func;break;case 'amazon':var url="/services/ajax/get_info.php?keywords="+params+"&class="+theclass+"&function="+func;break;case "avs":var url="/services/ajax/get_info.php?keywords=null&class="+theclass+"&function="+func;var post_xml=params;var method="POST";break}
if(method=='POST'){$.ajax({url:url,data:post_xml,type:'POST',contentType:"text/xml",dataType:"text",success:function(response){switch(theType){case 'avs':return verifyShippingResponse(response);break}}})}else{$.get(url,function(response){switch(theType){case 'refined':refinedSearch(response);break;case 'limit_shipping_method':limitShippingMethods(response,params);break;case 'suggested_search':suggestedSearch(response);break;case 'amazon':amazonResponse(response);break}})}}
function refinedSearch(response){var get_id=theParams.name.split('_');if(response!=''){var id=get_id[0]+'_'+get_id[1]+'_'+get_id[2]+'_'+(parseInt(get_id[3])+1);var select_box=document.getElementById(id);var new_options=response.split('\|');if(select_box.options.length>0){for(var i=1;i<select_box.options.length;i=1){select_box.options[i]=null}}
var len=new_options.length;for(var i=0;i<len;i++){var opts=new_options[i].split('::');if(typeof opts[0]!='undefined'&&typeof opts[1]!='undefined'){select_box.options[select_box.options.length]=new Option(opts[1],opts[0],!1,!1)}}
select_box.disabled=!1}else{window.location='/search_redirect/'+theParams.value+'/f'}}
function limitShippingMethods(response,lsm){var lsmParams=lsm.split("|");var method_id=lsmParams[2];if(typeof document.getElementById(method_id)=='undefined'||document.getElementById(method_id)==null){return!1}
var select_box=document.getElementById(method_id);var selected=select_box.value;if(select_box.options.length>0){for(var i=0;i<select_box.options.length;i=0){select_box.options[i]=null}}
var new_options=response.split('\|');select_box.options[select_box.options.length]=new Option('- Select Method -','');var len=new_options.length;for(var i=0;i<len;i++){var opt=new_options[i];if(typeof opt!='undefined'){var sel=!1;if(selected==opt){sel=!0}
select_box.options[select_box.options.length]=new Option(opt,opt,!1,sel)}}
select_box.selectedIndex=0}
function suggestedSearch(response){var suggest_box=document.getElementById('suggestions');document.getElementById('suggestions').className='';suggest_box.innerHTML='';if(response!=''){document.getElementById('suggestions').className='suggestions';var suggestions=response.split('\|');for(var i=0;i<suggestions.length;i++){var suggestion='<div class="suggestion" id="suggestion_'+i+'" onMouseOver="javascript:suggestedSearchField(this,\'over\');" onMouseOut="javascript:suggestedSearchField(this,\'out\');" onClick="javascript:suggestedSearchField(this,\'click\');">'+suggestions[i]+'</div>';suggest_box.innerHTML+=suggestion}}}
function amazonResponse(res){var out=new Array();if(res!=''){res=res.split(';');for(var i=0,n=res.length;i<n;i++){if(i==0)continue;if(res[i]!=''){shipTo=res[i].split(':');out[i]=new Array();out[i].city=shipTo[0];out[i].state=shipTo[1];out[i].zip=shipTo[2];out[i].country=shipTo[3];var args=out[i].country+'|'+out[i].state+'|s_method'+i;getInfo('limit_shipping_method','Shipping_Class','limitMethods',args)}}}}